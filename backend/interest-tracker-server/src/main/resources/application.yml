debug: false

spring:
  application:
    name: interest-tracker
  http:
    proxy:
      # 白鲸加速器代理配置（取消注释并配置正确的端口）
      # 如何查看白鲸加速器的代理端口：
      # 1. 打开白鲸加速器软件
      # 2. 查看设置或配置页面中的"本地代理"或"HTTP代理"端口
      # 3. 常见端口：7890、10809、10808、1080
      # 4. 如果找不到，可以尝试依次测试这些端口
      host: 127.0.0.1        # 白鲸加速器本地代理地址（通常是 127.0.0.1）
      port: 7890   # 白鲸加速器代理端口（请根据实际端口修改，常见：7890）
  # 文件上传配置
  servlet:
    multipart:
      max-file-size: 50MB      # 单个文件最大大小
      max-request-size: 50MB   # 整个请求最大大小（包括所有文件）
  # 数据源配置
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/interest_tracker?useUnicode=true&characterEncoding=UTF-8&serverTimezone=Asia/Shanghai&useSSL=false
    username: root
    password: 123456

  # Jackson 配置
  jackson:
    date-format: yyyy-MM-dd HH:mm:ss
    time-zone: GMT+8
  config:
    import:
      - optional:file:./application-cos.yml  # 可选的外部配置文件（相对于工作目录），如果不存在不会报错
      - optional:file:./application-secret.yml  # 其他敏感配置（如果有）
      - optional:classpath:application-cos.yml  # 可选：如果外部文件不存在，尝试从classpath加载

# MyBatis Plus 配置
mybatis-plus:
  configuration:
    map-underscore-to-camel-case: true
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
  global-config:
    db-config:
      id-type: auto
      logic-delete-field: deleted
      logic-delete-value: 1
      logic-not-delete-value: 0

# Swagger 配置
springdoc:
  api-docs:
    enabled: true
    path: /v3/api-docs
  swagger-ui:
    enabled: true
    path: /swagger-ui.html

# TMDB API 配置
tmdb:
  api:
    # 方式一：使用 Read Access Token（推荐，更安全，支持 v3/v4 API）
    read-access-token: eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzNTQyZjI1NDc0N2MwNjM3M2IyYTFiMTkzZjI2ZTNjOSIsIm5iZiI6MTc2NjExNDk2My4zNiwic3ViIjoiNjk0NGM2OTM4MDZiNzVlODg3MmZiMjIwIiwic2NvcGVzIjpbImFwaV9yZWFkIl0sInZlcnNpb24iOjF9.Y2NEeD2VX8CO_AzDoROEaOFyiiKUMDUrdG7SN5tyZf8 # 从环境变量读取，或在此处直接配置
    # 方式二：使用 API Key（备选方案，如果未配置 token 则使用 key）
    key: ${TMDB_API_KEY:3542f254747c06373b2a1b193f26e3c9}  # 从环境变量读取，或使用默认值
    # 其他配置
    base-url: https://api.themoviedb.org/3
    image-base-url: https://image.tmdb.org/t/p/w500
    language: zh-CN
    timeout: 5000
  # Mock 配置（网络无法访问 TMDB 时使用）
  mock:
    enabled: false  # 设置为 true 启用 Mock 模式（使用模拟数据）

# 国内 API 配置（作为 TMDB 的备选方案）
domestic:
  api:
    enabled: true   # 启用国内 API（国内网络建议开启）
    type: wmdb      # API 类型：wmdb（无需 key 的公开接口）
    base-url: https://api.wmdb.tv  # WMDB 默认地址
    api-key: ""     # 当前 WMDB 不需要 key，留空

# Spring Profiles 配置
# 引入外部配置文件（敏感信息配置）

# 腾讯云COS配置（敏感信息已移至 application-cos.yml）
# 如果 application-cos.yml 不存在，可以使用以下默认配置或环境变量
tencent:
  cos:
    # 地域（Region），例如：ap-beijing、ap-shanghai、ap-guangzhou
    region: ${TENCENT_COS_REGION:}
    # 访问密钥ID（SecretId）- 优先从环境变量读取
    secret-id: ${TENCENT_COS_SECRET_ID:}
    # 访问密钥Key（SecretKey）- 优先从环境变量读取
    secret-key: ${TENCENT_COS_SECRET_KEY:}
    # 存储桶名称（Bucket Name）
    bucket-name: ${TENCENT_COS_BUCKET_NAME:}
    # 访问域名（Domain），用于生成文件访问URL
    domain: ${TENCENT_COS_DOMAIN:}
    # 文件路径前缀（可选，默认为 photos/）
    path-prefix: photos/
    # 缩略图路径前缀（可选，默认为 thumbnails/）
    thumbnail-prefix: thumbnails/
    # 连接超时时间（毫秒，可选，默认30000）
    connection-timeout: 30000
    # Socket超时时间（毫秒，可选，默认30000）
    socket-timeout: 30000

# 日志配置
logging:
  level:
    root: INFO
    com.interest.tracker: DEBUG
    org.springframework.beans.factory.support: DEBUG
    org.springframework.context.support.PostProcessorRegistrationDelegate: DEBUG

