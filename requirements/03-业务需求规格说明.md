# 业务需求规格说明（BRD）

## 1. 文档信息
- 文档名称：业务需求规格说明（BRD）
- 版本号：v1.0.0
- 创建日期：2025-12-09
- 最后更新：2025-12-09
- 作者：产品团队
- 状态：草稿

## 2. 概述
- 背景：用户在摄影/影视/音乐/球赛四个兴趣领域的记录分散，缺少统一管理、自动化整理、回顾与推荐体验。
- 机会：免费数据源与免费 AI 能力（Hugging Face/Gemini）可支撑自动标签和基础分析，形成差异化的多兴趣一体化产品。
- 目标（业务向）：
  - 提升记录效率与完成率，降低手动整理成本
  - 提供有价值的回顾与基础分析，增加留存
  - 为后续推荐与商业化打基础（数据与画像）
- KPI（MVP 目标占位，后续与数据团队确认口径与数值）：
  - D7 留存：≥ X%
  - 记录完成率：使用自动标签的记录占比 ≥ X%
  - 回顾使用率：报告/时间线查看 UV / DAU ≥ X%
  - 推荐 CTR（如上线基础推荐）：≥ X%

## 3. 范围
### 3.1 本期（MVP）范围
- 多兴趣统一记录：摄影、影视、音乐（球赛为简版手动录入）
- 自动化：照片自动标签（免费 AI）、影视/音乐标签生成（免费 AI）
- 数据源：TMDB（影视）、Last.fm（音乐）；本地照片 EXIF 解析
- 回顾与基础分析：时间线/列表、基础统计卡片（数量/时间/占比）
- 账号与权限：注册/登录，简版 RBAC（用户/管理员）
- 日志与基础监控：关键接口日志、健康检查（可选简易告警）

### 3.2 非本期范围
- 深度社交（关注/评论/点赞）、支付/会员、高级推荐、复杂可视化大屏、原生 App

### 3.3 里程碑（占位）
- M0：需求基线 & 架构评审
- M1（MVP）：Must 需求交付（记录/自动标签/基础回顾）
- M2（MVP+）：Should 需求（球赛简版、基础统计、影视/音乐标签）
- M3：优化与扩展（待定）

## 4. 角色与利益相关方
- 最终用户：兴趣泛用户、摄影爱好者、重度内容消费者、数据控
- 内部团队：产品、设计、后端、AI、前端、测试、运维、数据、法务/合规
- 外部依赖：TMDB、Last.fm、Hugging Face/Gemini（免费优先）、对象存储提供方

## 5. 用户与场景
- Persona：轻度（轻记+回顾）、中度（标签/检索/推荐）、重度（批量管理/导出/分析）
- 核心场景：
  - 记录：上传照片、添加观影/听歌记录，支持搜索第三方数据源；简版球赛手动录入
  - 整理：自动标签（照片/影视/音乐），手动补充/编辑，过滤与排序
  - 回顾：时间线/列表、基础统计卡片，按时间/类型/标签查看
  - 管理：账号登录/登出，基础权限控制

## 6. 业务流程（概览）
```
记录输入 → 自动化处理（标签/解析） → 存储 → 查询与过滤 → 回顾与统计 → （可选）推荐/分享
```
- 上传/创建 → AI/解析 → 存储 → 列表/详情 → 时间线/统计 → （后续）推荐

## 7. 业务需求列表（BR-xx）
| 编号 | 需求 | 说明 | 优先级 | 验收要点 |
| --- | --- | --- | --- | --- |
| BR-01 | 用户注册/登录 | 邮箱/手机号 + 密码；登录/登出；Token 有效期 | Must | 能注册/登录/登出；异常提示清晰 |
| BR-02 | 摄影记录 | 上传 JPG/PNG；读取 EXIF（时间/设备/GPS）；详情/列表/排序 | Must | EXIF 解析成功率≥90%；分页可用 |
| BR-03 | 影视记录 | TMDB 搜索并创建；手动补充；状态/评分/标签 | Must | TMDB 搜索可用；创建成功 |
| BR-04 | 音乐记录 | Last.fm 搜索并创建；手动补充；标签 | Must | 搜索可用；创建成功 |
| BR-05 | 球赛记录（简版） | 手动录入对阵/时间/比分/类型；列表/详情 | Should | 录入成功；可查询 |
| BR-06 | 自动标签（照片） | 免费 AI（HF/Gemini）生成 3-5 标签，可回填与编辑 | Must | 成功率≥90%；失败可手动 |
| BR-07 | 自动标签（影视/音乐） | 基于文本信息生成 3-5 标签，可编辑 | Should | 有可用标签；失败可手动 |
| BR-08 | 时间线/列表回顾 | 按时间/类型/标签过滤；时间线/列表视图 | Must | 过滤准确；排序正确 |
| BR-09 | 基础统计卡片 | 记录数量、时间分布、类型占比（简版） | Should | 口径一致；结果正确 |
| BR-10 | 权限/角色 | 用户/管理员；越权校验 | Must | 鉴权与越权校验通过 |
| BR-11 | 日志与健康检查 | 关键接口日志；健康检查接口 | Must | 日志可追溯；健康检查 200 |

## 8. 业务规则（摘录）
- 上传限制：单文件大小/类型限制（占位：≤10MB；JPG/PNG）
- 标签生成：默认调用免费 AI，失败则允许手动；可重试；结果可编辑/覆盖
- 数据源调用：TMDB/Last.fm 需缓存搜索结果；超限/失败提示并允许手动输入
- 权限：普通用户仅能操作自身数据；管理员可管理全量
- 排序与过滤：时间排序默认按创建/发生时间；过滤按类型/标签/时间范围

## 9. 数据与指标口径（MVP 占位）
- 新增记录数 = 当日新增（照片/影视/音乐/球赛）去重合计
- AI 使用率 = 启用 AI 的记录条数 / 总记录条数
- 回顾使用率 = 报告/时间线查看 UV / DAU
- 推荐 CTR（如上线基础推荐）= 推荐点击 / 推荐曝光
- 成功率（AI 标签）= 返回可用标签的调用次数 / 总调用次数

## 10. 依赖与假设
- 免费 API 可用且在配额内（HF/Gemini）；TMDB/Last.fm API Key 有效
- 付费 AI 默认关闭，必要时由配置开关控制
- 对象存储可用；本期可用本地/轻量存储方案
- 前端配合实现搜索/上传/过滤/展示

## 11. 风险与对策
- 配额/稳定性：缓存 + 重试 + 降级（免费 API → 手动）; 付费/备选 API 兜底（默认关）
+- 成本：默认免费方案，付费方案需额度与开关控制
*- 隐私/合规：最小化收集；存储加密；支持用户导出/删除；遵守第三方条款
*- 进度：Must/Should 分层，严格控制 MVP 范围

## 12. 非功能（业务侧诉求摘要）
- 性能：核心接口 P95 < 800ms（MVP 数据量）；后续优化 < 500ms
- 可用性：SLA 99.5%（单区单活），允许维护窗口
- 安全：HTTPS，鉴权/越权校验，基础限流
- 隐私：图片/位置信息仅用户可见；数据导出/删除（设计占位）
- 运维：日志、健康检查、基础监控（可选简易告警）

## 13. 验收标准（业务视角）
- Must 需求用例通过率 100%；Should ≥90%
- AI 标签成功率（有可用标签）≥90%，失败有兜底提示
- 数据口径对齐，统计结果与样本核对一致
- 越权/鉴权测试通过；关键接口无高频错误

## 14. 变更管理
- 变更需记录原因、影响范围、优先级调整
- PM/Tech/QA 评审后更新 BRD/PRD/追溯矩阵
- 版本号按 vX.Y.Z 递增，保留变更历史

## 15. 术语
- TMDB/Last.fm：第三方影视/音乐数据源
- HF/Gemini：免费优先的 AI API 提供方
- RBAC：基于角色的访问控制
- P95：95 分位响应时间


